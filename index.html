<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SeedOrders — wspólna baza</title>
  <style>
    :root{
      --bg:#0b1020; --panel:#111936; --muted:#99a6c0; --text:#e9f0ff;
      --accent:#36d399; --accent2:#60a5fa; --danger:#ef4444; --line:#2a345a;
      --chip:#101827;
    }
    *{box-sizing:border-box}
    body{margin:0;font:15px/1.4 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);background:var(--bg)}
    .wrap{max-width:1200px;margin:auto;padding:16px;display:grid;gap:16px}
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:14px}
    .flex{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    h1{font-size:20px;margin:0}
    h2{font-size:16px;margin:0 0 6px 0;color:#dbe7ff}
    input,select,button,textarea{background:#0e1436;border:1px solid var(--line);color:var(--text);padding:10px;border-radius:10px;outline:none}
    input::placeholder,textarea::placeholder{color:#7481a8}
    button{cursor:pointer}
    button.primary{background:var(--accent);color:#042016;font-weight:600;border:0}
    button.warn{background:var(--danger);color:#fff;border:0}
    button.ghost{background:#0f1a43;border:1px solid var(--line);color:var(--text)}
    .btn-sm{padding:6px 10px;border-radius:9px;font-size:13px}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid var(--line);vertical-align:top}
    .kbd{background:#0e1436;border:1px solid var(--line);padding:2px 6px;border-radius:6px}
    .kbdrow{display:flex;gap:6px;align-items:center}
    .muted{color:#99a6c0}
    .right{margin-left:auto}
    .chip{display:inline-flex;align-items:center;padding:3px 9px;border-radius:999px;border:1px solid var(--line);background:#0e1530}
    .ok{color:#7fffd4}
    .bad{color:#ffb4b4}
    .order{border:1px solid var(--line);border-radius:12px;padding:10px;margin:10px 0;background:#0c1331}
    .order-header{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
    .status{display:inline-flex;align-items:center;padding:3px 9px;border-radius:999px;border:1px solid var(--line)}
    .sok{background:#0e2431;color:#8ff1c2}
    .swarn{background:#31240e;color:#ffd27f}
    .sdanger{background:#311010;color:#ff9f9f}
  </style>
</head>
<body>
<div class="wrap">

  <div class="flex">
    <h1>SeedOrders — wspólna baza</h1>
    <span class="chip" id="status">offline</span>
    <span class="chip" id="clock"></span>
    <button id="refreshAll" class="ghost">Odśwież wszystko</button>
  </div>

  <!-- Cennik -->
  <div class="panel grid">
    <div class="flex">
      <h2>Cennik (<span class="kbd">seedorders_prices</span>)</h2>
      <span class="right"></span>
      <button id="togglePrices" class="ghost btn-sm">Ukryj</button>
    </div>

    <div id="pricesBody" class="grid">
      <div class="flex" style="gap:10px;align-items:center;flex-wrap:wrap">
        <select id="pCategory">
          <option value="Rzepak">Rzepak</option>
          <option value="Kukurydza">Kukurydza</option>
          <option value="Zboża">Zboża</option>
          <option value="Trawy">Trawy</option>
          <option value="Inne">Inne</option>
        </select>
        <input id="pVar" placeholder="Odmiana" class="grow" />
        <input id="pPrice" type="number" step="0.01" placeholder="Cena / szt." />
        <input id="pVendor" placeholder="Dostawca (opcjonalnie)" class="grow" />
        <button id="pSave" class="primary">Zapisz</button>
        <input id="pSearch" placeholder="Szukaj w cenniku…" class="right" />
      </div>
      <table>
        <thead>
          <tr><th>Odmiana</th><th>Kategoria</th><th>Cena</th><th>Dostawca</th><th></th></tr>
        </thead>
        <tbody id="pricesT"></tbody>
      </table>
    </div>
  </div>

  <!-- Kontrahenci -->
  <div class="panel grid">
    <div class="flex">
      <h2>Kontrahenci (<span class="kbd">seedorders_clients</span>)</h2>
      <span class="right"></span>
      <button id="toggleClients" class="ghost btn-sm">Ukryj</button>
    </div>
    <div id="clientsBody" class="grid">
      <div class="row">
        <input id="cName" placeholder="Nazwa (np. Jan Kowalski)" class="grow" />
        <input id="cPhone" placeholder="Telefon" />
        <input id="cAddress" placeholder="Adres (ulica, kod, miejscowość, kraj)" class="grow" />
        <button id="cSave" class="primary">Zapisz</button>
        <button id="cDelete" class="danger">Usuń</button>
        <input id="cSearch" class="right" placeholder="Szukaj klienta…" />
      </div>
      <table>
        <thead><tr><th>Nazwa</th><th>Telefon</th><th>Adres</th></tr></thead>
        <tbody id="clientsT"></tbody>
      </table>
    </div>
  </div>

  <!-- Dodaj zamówienie -->
  <div class="panel grid">
    <h2>Dodaj zamówienie</h2>
    <div class="row">
      <select id="oClient"></select>
      <input id="oPhone" placeholder="Telefon (auto)" />
    </div>
    <div class="row">
      <select id="oCategory">
        <option>Rzepak</option><option>Kukurydza</option><option>Zboża</option>
        <option>Trawy</option><option>Inne</option>
      </select>
      <select id="oVar"></select>
    </div>
    <div class="row">
      <input id="oQty" type="number" min="1" value="1" />
      <input id="oPrice" type="number" step="0.01" placeholder="Cena / szt." />
    </div>
    <div class="row">
      <input id="oVendor" placeholder="Dostawca (opcjonalnie)" />
      <input id="oNotes" placeholder="Uwagi (opcjonalnie)" />
    </div>
    <div>
      <button id="addItem" class="primary">Dodaj pozycję</button>
    </div>
  </div>

  <!-- Zamówienia -->
  <div class="panel grid">
    <div class="flex">
      <h2>Zamówienia (ostatnie)</h2>
      <span class="right"></span>
    </div>
    <div class="flex" style="gap:10px;align-items:center;flex-wrap:wrap">
      <input id="oSearch" placeholder="Szukaj: klient/odmiana/uwagi…" class="grow" />
      <select id="oStatusFilter">
        <option value="">Wszystkie statusy</option>
        <option value="zamówione">zamówione</option>
        <option value="częściowo">częściowo</option>
        <option value="dostarczone">dostarczone</option>
      </select>
      <button id="oReload" class="ghost">Odśwież</button>
    </div>
    <div id="ordersContainer"></div>
  </div>

  <!-- Raport -->
  <div class="panel grid">
    <div class="flex"><h2>Raport</h2></div>
    <div class="row">
      <input id="rFrom" type="date" />
      <input id="rTo" type="date" />
      <select id="rCat">
        <option value="">(wszystkie)</option>
        <option value="Rzepak">Rzepak</option>
        <option value="Kukurydza">Kukurydza</option>
        <option value="Zboża">Zboża</option>
        <option value="Trawy">Trawy</option>
        <option value="Inne">Inne</option>
      </select>
      <button id="rShow" class="ghost">Pokaż</button>
    </div>
    <table>
      <thead><tr><th>Kategoria</th><th>Odmiana</th><th>Zam.</th><th>Wyd.</th></tr></thead>
      <tbody id="reportT"></tbody>
    </table>
    <div class="muted">Zakres: <span id="rRange"></span></div>
  </div>

</div>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
<script>
  // ====== KONFIG (z Twojego pliku) ======
  const SUPABASE_URL  = 'https://zseqkyjcqkuvrqxluihs.supabase.co';          
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpzZXFreWpjcWt1dnJxeGx1aWhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzNDk2NjUsImV4cCI6MjA3NjkyNTY2NX0.ubbYQzYWiMyETohwKRnVQZaZRoIA-zwiX2YsY8TPsDk';
  const db = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { auth:{persistSession:false} });

  // ====== POMOCNICZE ======
  const $ = s=>document.querySelector(s);
  const fmt = n => (n??0).toLocaleString('pl-PL');

  // zegar
  setInterval(()=>{ const el=$('#clock'); if(el) el.textContent=new Date().toLocaleTimeString('pl-PL'); },1000);

  // ====== STATUS ======
  async function setStatus(){
    try{
      const { error } = await db.from('seedorders_prices').select('id').limit(1);
      const el = $('#status');
      if(error){ el.textContent='offline'; el.className='chip bad'; }
      else { el.textContent='online'; el.className='chip ok'; }
    }catch{ const el=$('#status'); el.textContent='offline'; el.className='chip bad'; }
  }

  // ====== CENNIK ======
  async function loadPrices(){
    const q = ($('#pSearch').value||'').toLowerCase();
    const { data, error } = await db.from('seedorders_prices').select('*').order('kategoria').order('odmiana');
    if(error){ console.error(error); return; }
    const tbody=$('#pricesT'); tbody.innerHTML='';
    (data||[]).filter(r=>{
      const s = `${r.odmiana||''} ${r.kategoria||''} ${r.dostawca||''}`.toLowerCase();
      return s.includes(q);
    }).forEach(r=>{
      const tr=document.createElement('tr');
      tr.innerHTML = `
        <td>${r.odmiana||''}</td>
        <td>${r.kategoria||''}</td>
        <td>${fmt(r.cena||0)}</td>
        <td>${r.dostawca||''}</td>
        <td class="right"><button class="btn-sm warn" data-delprice="${r.id}">Usuń</button></td>
      `;
      tbody.appendChild(tr);
    });
    tbody.querySelectorAll('[data-delprice]').forEach(b=> b.onclick=()=>deletePrice(b.dataset.delprice));
  }
  async function savePrice(){
    const row = {
      kategoria: $('#pCategory').value||'',
      odmiana:   $('#pVar').value||'',
      cena:      $('#pPrice').value ? Number($('#pPrice').value) : null,
      dostawca:  $('#pVendor').value||null
    };
    if(!row.odmiana){ alert('Podaj odmianę'); return; }
    const { error } = await db.from('seedorders_prices').upsert(row);
    if(error){ alert('Błąd zapisu cennika: '+error.message); }
    await loadPrices();
  }
  async function deletePrice(id){
    if(!confirm('Usunąć pozycję z cennika?')) return;
    const { error } = await db.from('seedorders_prices').delete().eq('id', id);
    if(error){ alert('Błąd usuwania: '+error.message); }
    await loadPrices();
  }

  // ====== KLIENCI ======
  async function loadClients(){
    const q = ($('#cSearch').value||'').toLowerCase();
    const { data, error } = await db.from('seedorders_clients').select('*').order('name');
    if(error){ console.error(error); return; }
    const tbody=$('#clientsT'); tbody.innerHTML='';
    const combo=$('#oClient'); combo.innerHTML='';
    (data||[]).forEach(c=>{
      const ok = `${c.name||''} ${c.phone||''} ${c.address||''}`.toLowerCase().includes(q);
      if(ok){
        const tr=document.createElement('tr');
        tr.innerHTML = `<td>${c.name||''}</td><td>${c.phone||''}</td><td>${c.address||''}</td>`;
        tbody.appendChild(tr);
      }
      const opt=document.createElement('option'); opt.value=c.id; opt.textContent=c.name||'(bez nazwy)'; combo.appendChild(opt);
    });
  }
  async function saveClient(){
    const row = { name:$('#cName').value||'', phone:$('#cPhone').value||'', address:$('#cAddress').value||'' };
    if(!row.name){ alert('Podaj nazwę'); return; }
    const { error } = await db.from('seedorders_clients').upsert(row);
    if(error){ alert('Błąd zapisu klienta: '+error.message); }
    await loadClients();
  }
  async function deleteClient(){
    const name=$('#cName').value||'';
    if(!name){ alert('Podaj nazwę (klucz) do usunięcia'); return; }
    if(!confirm(`Usunąć klienta: ${name}?`)) return;
    const { error } = await db.from('seedorders_clients').delete().eq('name', name);
    if(error){ alert('Błąd usuwania klienta: '+error.message); }
    await loadClients();
  }

  // ====== ODM./KATEGORIA do formularza ======
  async function fillOdmianyFor(cat){
    $('#oVar').innerHTML='';
    const { data, error } = await db.from('seedorders_prices').select('odmiana').eq('kategoria', cat).order('odmiana');
    if(error){ console.error(error); return; }
    (data||[]).forEach(r=>{
      const opt=document.createElement('option'); opt.textContent=r.odmiana; opt.value=r.odmiana;
      $('#oVar').appendChild(opt);
    });
  }

  // ====== ZAMÓWIENIA (nagłówek + pozycja) ======
  async function addOrderItem(){
    const client_id = $('#oClient').value;
    if(!client_id){ alert('Wybierz klienta'); return; }
    const { data:cli } = await db.from('seedorders_clients').select('*').eq('id', client_id).single();

    const head = {
      client: cli?.name || '(client)',
      phone:  cli?.phone || '',
      notes:  $('#oNotes').value || null,
      created_at: new Date().toISOString()
    };
    const { data:o, error:eH } = await db.from('seedorders_orders').insert(head).select().single();
    if(eH){ alert('Błąd nagłówka: '+eH.message); return; }

    const qty = Number($('#oQty').value||0);
    const price = $('#oPrice').value ? Number($('#oPrice').value) : null;

    const item = {
      order_id:o.id,
      kategoria: $('#oCategory').value,
      odmiana:   $('#oVar').value,
      ordered_qty: qty, ilosc: qty,
      delivered_qty: 0, wydano: 0,
      cena: price,
      dostawca: $('#oVendor').value||null
    };
    const { error:e2 } = await db.from('seedorders_items').insert(item);
    if(e2){ alert('Błąd dodawania pozycji: '+e2.message); return; }

    await loadOrders();
    await loadReport();
  }

  async function loadItemsFor(orderId){
    const { data, error } = await db.from('seedorders_items')
      .select('id,kategoria,odmiana,cena,dostawca,ordered_qty,delivered_qty,ilosc,wydano')
      .eq('order_id', orderId);
    if(error){ console.error(error); return []; }
    return (data||[]).map(r=>({
      id:r.id,
      kategoria:r.kategoria, odmiana:r.odmiana, cena:r.cena, dostawca:r.dostawca,
      ordered: r.ordered_qty ?? r.ilosc ?? 0,
      delivered: r.delivered_qty ?? r.wydano ?? 0
    }));
  }

  async function updateOrderStatusByItems(orderId){
    const { data, error } = await db.from('seedorders_items')
      .select('ordered_qty,delivered_qty,ilosc,wydano').eq('order_id', orderId);
    if(error){ console.error(error); return; }
    let sumOrd=0, sumDel=0;
    for(const r of (data||[])){
      const o = r.ordered_qty ?? r.ilosc ?? 0;
      const d = r.delivered_qty ?? r.wydano ?? 0;
      sumOrd += Number(o||0); sumDel += Number(d||0);
    }
    const status = (sumDel<=0) ? 'zamówione' : (sumDel<sumOrd ? 'częściowo' : 'dostarczone');
    await db.from('seedorders_orders').update({ status }).eq('id', orderId);
  }

  // ====== Wydawanie (−1 / +1 / ustaw dokładnie) ======
  async function changeDelivery(itemId, delta){
    const { data, error } = await db.from('seedorders_items')
      .select('id, ordered_qty, delivered_qty, ilosc, wydano, order_id')
      .eq('id', itemId).single();
    if(error){ alert('Błąd odczytu pozycji: '+error.message); return; }

    const ord = data.ordered_qty ?? data.ilosc ?? 0;
    const del = data.delivered_qty ?? data.wydano ?? 0;
    const next = Math.max(0, Math.min(ord, del + delta));

    const upd = {};
    if('delivered_qty' in data) upd.delivered_qty = next;
    if('wydano' in data)       upd.wydano = next;

    const { error:errU } = await db.from('seedorders_items').update(upd).eq('id', itemId);
    if(errU){ alert('Błąd zapisu: '+errU.message); return; }
    await updateOrderStatusByItems(data.order_id);
    await loadOrders(); await loadReport();
  }

  async function setDeliveredExact(itemId, orderId, inputEl){
    const n = Number(inputEl.value||0);
    if(isNaN(n) || n<0){ alert('Nieprawidłowa ilość.'); return; }
    const { data, error } = await db.from('seedorders_items')
      .select('ordered_qty, ilosc').eq('id', itemId).single();
    const ord = data?.ordered_qty ?? data?.ilosc ?? 0;
    const val = Math.max(0, Math.min(ord, n));
    const { error:e2 } = await db.from('seedorders_items')
      .update({ delivered_qty: val, wydano: val }).eq('id', itemId);
    if(e2){ alert('Błąd ustawiania wydania: '+e2.message); return; }
    await updateOrderStatusByItems(orderId);
    await loadOrders(); await loadReport();
  }

  async function deleteOrderItem(itemId, orderId){
    if(!confirm('Usunąć pozycję?')) return;
    const { error } = await db.from('seedorders_items').delete().eq('id', itemId);
    if(error){ alert('Błąd usuwania pozycji: '+error.message); return; }
    await updateOrderStatusByItems(orderId);
    await loadOrders(); await loadReport();
  }

  let orders = [];
  async function loadOrders(){
    const { data, error } = await db.from('seedorders_orders')
      .select('id,client,phone,notes,status,created_at').order('created_at',{ascending:false}).limit(100);
    if(error){ console.error(error); return; }
    orders = data||[];
    await renderOrders();
  }

  // === sort helper: zamówione -> częściowo -> dostarczone ===
  function __rankStatus(s){
    if(s === 'dostarczone') return 2;
    if(s === 'częściowo')   return 1;
    return 0; // zamówione
  }

  function renderOrders(){
    const q = ($('#oSearch').value||'').toLowerCase();
    const only = $('#oStatusFilter').value;
    const box = $('#ordersContainer'); box.innerHTML='';

    // TYLKO SORTOWANIE: zamówione -> częściowo -> dostarczone, nowsze wyżej
    const __sorted = (orders||[]).slice().sort((a,b)=>{
      const r = __rankStatus(a.status||'') - __rankStatus(b.status||'');
      if(r!==0) return r;
      return new Date(b.created_at) - new Date(a.created_at);
    });

    for(const o of __sorted){
      const items = await loadItemsFor(o.id);
      const hay = (`${o.client||''} ${o.notes||''} `+items.map(i=>i.odmiana).join(' ')).toLowerCase();
      if(q && !hay.includes(q)) continue;
      if(only && o.status!==only) continue;

      const totalOrd = items.reduce((a,b)=>a+(b.ordered||0),0);
      const totalDel = items.reduce((a,b)=>a+(b.delivered||0),0);
      const totalRem = Math.max(0,totalOrd-totalDel);

      let cls='sok', label='zamówione';
      if(totalDel>0 && totalDel<totalOrd){ cls='swarn'; label='częściowo'; }
      if(totalRem===0 && totalOrd>0){ cls='sdanger'; label='dostarczone'; }

      const card = document.createElement('div'); card.className='order';
      card.innerHTML = `
        <div class="order-header">
          <span class="status ${cls}">${label}</span>
          <span class="chip">${new Date(o.created_at).toLocaleString('pl-PL')}</span>
          <b>${o.client||''}</b>
          <span class="muted">${o.phone||''}</span>
          <span class="right muted">${o.notes||''}</span>
        </div>
        <table>
          <thead><tr><th>Kategoria</th><th>Odmiana</th><th>Cena</th><th>Zam.</th><th>Wyd.</th><th>Poz.</th><th>Wydaj</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      `;
      const tbody = card.querySelector('tbody');

      for(const it of items){
        const remain = Math.max(0,(it.ordered||0) - (it.delivered||0));
        const tr=document.createElement('tr');
        tr.innerHTML = `
          <td>${it.kategoria||''}</td>
          <td>${it.odmiana||''}</td>
          <td>${fmt(it.cena||0)}</td>
          <td>${fmt(it.ordered||0)}</td>
          <td>${fmt(it.delivered||0)}</td>
          <td>${fmt(remain)}</td>
          <td class="kbdrow">
            <div class="flex">
              <button class="btn-sm ghost" data-minus="${it.id}">−1</button>
              <button class="btn-sm ghost" data-plus="${it.id}">+1</button>
              <input data-exact="${it.id}" type="number" min="0" step="1" class="kbd" style="width:90px" placeholder="szt." />
              <button class="btn-sm primary" data-set="${it.id}">Ustaw</button>
            </div>
          </td>
          <td><button class="btn-sm warn" data-delete="${it.id}" data-order="${o.id}">Usuń</button></td>
        `;
        tbody.appendChild(tr);
      }

      card.querySelectorAll('[data-minus]').forEach(b=> b.onclick=()=>changeDelivery(b.dataset.minus,-1));
      card.querySelectorAll('[data-plus]').forEach(b=> b.onclick=()=>changeDelivery(b.dataset.plus,+1));
      card.querySelectorAll('[data-delete]').forEach(b=> b.onclick=()=>deleteOrderItem(b.dataset.delete,b.dataset.order));
      card.querySelectorAll('[data-set]').forEach(b=>{
        b.onclick=()=>{
          const inp = card.querySelector(`[data-exact="${b.dataset.set}"]`);
          setDeliveredExact(b.dataset.set, o.id, inp);
        };
      });

      box.appendChild(card);
    }
  }

  // ====== RAPORT ======
  function setDefaultReportRange(){
    const d=new Date(), d2=new Date(); d.setDate(d.getDate()-30);
    $('#rFrom').value = d.toISOString().slice(0,10);
    $('#rTo').value   = d2.toISOString().slice(0,10);
  }

  async function loadReport(){
    const from = $('#rFrom').value || '2000-01-01';
    const to   = $('#rTo').value   || '2100-01-01';
    const cat  = $('#rCat').value;

    let query = db.from('seedorders_items')
      .select('kategoria, odmiana, ordered_qty, delivered_qty, ilosc, wydano, created_at')
      .gte('created_at', from).lte('created_at', to);
    if(cat) query = query.eq('kategoria', cat);

    const { data, error } = await query;
    if(error){ console.error(error); return; }

    const sums = {};
    (data||[]).forEach(r=>{
      const key = `${r.kategoria}||${r.odmiana}`;
      if(!sums[key]) sums[key]={kat:r.kategoria, odm:r.odmiana, zam:0, wyd:0};
      const ord = r.ordered_qty ?? r.ilosc ?? 0;
      const del = r.delivered_qty ?? r.wydano ?? 0;
      sums[key].zam += Number(ord||0);
      sums[key].wyd += Number(del||0);
    });

    const tbody=$('#reportT'); tbody.innerHTML='';
    Object.values(sums).forEach(s=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${s.kat}</td><td>${s.odm}</td><td>${fmt(s.zam)}</td><td>${fmt(s.wyd)}</td>`;
      tbody.appendChild(tr);
    });
    $('#rRange').textContent = `${from} → ${to}`;
  }

  // ====== START ======
  (async()=>{
    setDefaultReportRange();
    await setStatus();
    await loadPrices();
    await loadClients();
    await fillOdmianyFor($('#oCategory').value||'Rzepak');
    await loadOrders();
    await loadReport();
  })();

  // ====== UI ======
  $('#refreshAll').addEventListener('click', async ()=>{ await setStatus(); await loadPrices(); await loadClients(); await loadOrders(); await loadReport(); });

  $('#togglePrices').addEventListener('click', (e)=>{ const b=$('#pricesBody'); const hide=b.style.display==='none'; b.style.display=hide?'grid':'none'; e.target.textContent=hide?'Ukryj':'Pokaż'; });
  $('#toggleClients').addEventListener('click',(e)=>{ const b=$('#clientsBody'); const hide=b.style.display==='none'; b.style.display=hide?'grid':'none'; e.target.textContent=hide?'Ukryj':'Pokaż'; });

  $('#pSave').addEventListener('click',savePrice);
  $('#pSearch').addEventListener('input',loadPrices);

  $('#cSave').addEventListener('click',saveClient);
  $('#cDelete').addEventListener('click',deleteClient);
  $('#cSearch').addEventListener('input',loadClients);

  $('#oCategory').addEventListener('change',()=>fillOdmianyFor($('#oCategory').value));
  $('#addItem').addEventListener('click',addOrderItem);
  $('#oSearch').addEventListener('input',loadOrders);
  $('#oStatusFilter').addEventListener('change',loadOrders);
  $('#oReload').addEventListener('click',loadOrders);

  $('#rShow').addEventListener('click',loadReport);
</script>
</body>
</html>
